---
// components/AboutSection.astro
// Componente de sección "Sobre Mí" con diseño editorial

import { aboutData } from "../data/about";
import type { AboutData } from "../data/about";

// Props interface
interface Props {
    class?: string;
    variant?: "default" | "technical" | "creative";
}

const { class: className, variant = "default" } = Astro.props;

// Usar variante si se especifica (futuro)
// const data: AboutData = variant !== 'default'
//   ? aboutDataVariants[variant]
//   : aboutData;
---

<!-- ============================================
     ABOUT SECTION - Profile & Information
     ============================================ -->
<section
    id="about"
    class:list={["about-section", "container", "border-b", className]}
    aria-labelledby="about-title"
>
    <div class="about-grid">
        <!-- LEFT COLUMN: Visual & Title -->
        <aside
            class="col-visual border-r"
            aria-label="Información visual del perfil"
        >
            <div class="sticky-content">
                <!-- Title -->
                <div class="about-title font-serif">
                    <span class="label-profile">{aboutData.title.label}</span>
                    <h2 id="about-title">
                        {aboutData.title.main}
                        <br />
                        {aboutData.title.conjunction}{" "}
                        <span class="italic text-ink opacity-20"
                            >{aboutData.title.subtitle}</span
                        >
                    </h2>
                </div>

                <!-- Profile Image -->
                <figure class="image-frame">
                    <div class="frame-deco" aria-hidden="true"></div>
                    <img
                        src={aboutData.image.src}
                        alt={aboutData.image.alt}
                        class="profile-img"
                        loading="lazy"
                    />
                    <figcaption class="caption">
                        <span>{aboutData.image.figure}</span>
                        <span>— {aboutData.image.caption}</span>
                    </figcaption>
                </figure>
            </div>
        </aside>

        <!-- RIGHT COLUMN: Content -->
        <article class="col-content">
            <!-- Bio Text -->
            <div class="text-block">
                {
                    aboutData.bio.map((paragraph) => (
                        <p class="mb-6 leading-relaxed">
                            {paragraph.hasDropCap && (
                                <span class="drop-cap">H</span>
                            )}
                            <Fragment set:html={paragraph.text} />
                        </p>
                    ))
                }
            </div>

            <!-- Editorial Divider -->
            <div class="divider" aria-hidden="true">
                <span class="divider-icon">✽</span>
            </div>

            <!-- Data Grid: Services + Tech Stack -->
            <div class="data-grid">
                <!-- Services Column -->
                <div class="data-col border-r">
                    <h3 class="data-header">/// Servicios</h3>
                    <ul class="data-list" role="list">
                        {
                            aboutData.services.map((service) => (
                                <li>{service}</li>
                            ))
                        }
                    </ul>
                </div>

                <!-- Tech Stack Column -->
                <div class="data-col">
                    <h3 class="data-header">/// Arsenal</h3>
                    <div class="tech-list" role="list">
                        {
                            aboutData.techStack.map((tech) => (
                                <span
                                    class:list={[
                                        "tech-item",
                                        { "highlight-box": tech.highlighted },
                                        { figma: tech.special },
                                    ]}
                                    role="listitem"
                                >
                                    {tech.name}
                                </span>
                            ))
                        }
                    </div>
                </div>
            </div>

            <!-- Quote Box -->
            <blockquote class="quote-box">
                <p>"{aboutData.quote.text}"</p>
                <cite class="author">— {aboutData.quote.author}</cite>
            </blockquote>
        </article>
    </div>
</section>

<style>
    /* ============================================
     SECTION STRUCTURE
     ============================================ */
    .about-section {
        width: 100%;
    }

    .border-b {
        border-bottom: var(--border-width) solid var(--color-ink);
    }

    .border-r {
        border-right: var(--border-width) solid var(--color-ink);
    }

    /* ============================================
     ABOUT GRID - Main Layout
     ============================================ */
    .about-grid {
        display: grid;
        grid-template-columns: 1fr;
    }

    @media (min-width: 1024px) {
        .about-grid {
            grid-template-columns: 5fr 7fr;
        }
    }

    /* ============================================
     VISUAL COLUMN - Left Side
     ============================================ */
    .col-visual {
        padding: 3rem 2rem;
        background-color: var(--color-paper);
    }

    @media (min-width: 1024px) {
        .col-visual {
            padding: 6rem 4rem;
        }

        .sticky-content {
            position: sticky;
            top: 6rem;
        }
    }

    @media (max-width: 1023px) {
        .col-visual {
            border-right: none;
            border-bottom: var(--border-width) solid var(--color-ink);
        }
    }

    /* ============================================
     TITLE - Main Heading
     ============================================ */
    .about-title {
        font-size: clamp(3rem, 8vw, 5rem);
        line-height: 0.9;
        margin-bottom: 4rem;
    }

    .about-title h2 {
        font-size: inherit;
        font-weight: inherit;
        margin: 0;
    }

    .label-profile {
        font-family: var(--font-mono);
        color: var(--color-red);
        text-transform: uppercase;
        letter-spacing: 0.1em;
        border-bottom: 1px solid var(--color-red);
        display: block;
        width: max-content;
        font-size: 0.875rem;
        margin-bottom: 1rem;
        padding-bottom: 0.25rem;
    }

    .italic {
        font-style: italic;
    }

    .text-ink {
        color: var(--color-red);
    }

    .opacity-50 {
        opacity: 0.5;
    }

    /* ============================================
     IMAGE FRAME - Profile Picture
     ============================================ */
    .image-frame {
        position: relative;
        margin-block-start: 2rem;
        border: 1px solid var(--color-ink);
        padding: 0.5rem;
        background: var(--color-white);
        margin: 0;
    }

    .frame-deco {
        position: absolute;
        inset: -10px -10px auto auto;
        width: 100%;
        height: 100%;
        border: 1px solid var(--color-ink);
        z-index: 0;
        pointer-events: none;
    }

    .profile-img {
        width: 100%;
        height: auto;
        display: block;
        filter: grayscale(100%);
        transition: filter 0.5s ease;
        position: relative;
        z-index: 1;
    }

    .image-frame:hover .profile-img {
        filter: grayscale(0%);
    }

    .caption {
        font-family: var(--font-mono);
        font-size: 0.75rem;
        text-transform: uppercase;
        display: flex;
        justify-content: space-between;
        margin-block-start: 0.5rem;
        border-top: 1px solid var(--color-ink);
        padding-block-start: 0.5rem;
    }

    /* ============================================
     CONTENT COLUMN - Right Side
     ============================================ */
    .col-content {
        background-color: var(--color-white);
    }

    /* ============================================
     TEXT BLOCK - Biography
     ============================================ */
    .text-block {
        padding: 3rem 2rem;
        font-family: var(--font-sans);
        font-size: clamp(1rem, 2vw, 1.125rem);
        line-height: 1.6;
        text-align: justify;
    }

    @media (min-width: 1024px) {
        .text-block {
            padding: 6rem 4rem;
        }
    }

    .mb-6 {
        margin-bottom: 1.5rem;
    }

    .leading-relaxed {
        line-height: 1.75;
    }

    /* Drop cap - First letter */
    .drop-cap {
        float: left;
        font-family: var(--font-serif);
        font-size: 4rem;
        font-weight: bold;
        line-height: 0.8;
        margin-inline-end: 0.75rem;
        margin-block-start: -0.25rem;
        color: var(--color-ink);
    }

    /* Highlight text */
    :global(.highlight) {
        color: var(--color-white);
        background: var(--color-red);
        padding-inline: 4px;
    }

    /* ============================================
     EDITORIAL DIVIDER
     ============================================ */
    .divider {
        display: flex;
        align-items: center;
        justify-content: center;
        border-top: 1px solid var(--color-ink);
        border-bottom: 1px solid var(--color-ink);
        padding-block: 1rem;
        background: var(--color-paper);
    }

    .divider-icon {
        font-size: 1.5rem;
        color: var(--color-red);
    }

    /* ============================================
     DATA GRID - Services & Tech Stack
     ============================================ */
    .data-grid {
        display: grid;
        grid-template-columns: 1fr;
        border-bottom: 1px solid var(--color-ink);
    }

    @media (min-width: 768px) {
        .data-grid {
            grid-template-columns: 1fr 1fr;
        }
    }

    .data-col {
        padding: 2rem;
    }

    @media (max-width: 767px) {
        .data-col.border-r {
            border-right: none;
            border-bottom: 1px solid var(--color-ink);
        }
    }

    .data-header {
        font-family: var(--font-mono);
        text-transform: uppercase;
        font-size: 0.75rem;
        margin-bottom: 1.5rem;
        color: var(--color-red);
        letter-spacing: 0.05em;
        font-weight: normal;
    }

    /* Services list */
    .data-list {
        list-style: none;
        font-family: var(--font-serif);
        font-size: 1.25rem;
        line-height: 1.8;
    }

    .data-list li::before {
        content: "— ";
        color: var(--color-ink);
        opacity: 0.3;
    }

    /* Tech stack list */
    .tech-list {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        font-family: var(--font-mono);
        font-size: 0.75rem;
    }

    .tech-item {
        border: 1px solid var(--color-ink);
        padding: 0.25rem 0.5rem;
        transition:
            background-color 0.3s ease,
            color 0.3s ease;
        cursor: default;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .tech-item:hover {
        background: var(--color-ink);
        color: var(--color-white);
    }

    .highlight-box {
        background: var(--color-ink);
        color: var(--color-white);
    }

    .figma {
        border-color: var(--color-red);
        color: var(--color-red);
    }

    .figma:hover {
        background: var(--color-red);
        color: var(--color-white);
    }

    /* ============================================
     QUOTE BOX - Final Citation
     ============================================ */
    .quote-box {
        padding: 4rem 2rem;
        text-align: center;
        font-family: var(--font-serif);
    }

    .quote-box p {
        font-size: clamp(1.5rem, 3vw, 2rem);
        font-style: italic;
        margin-bottom: 1rem;
    }

    .author {
        font-family: var(--font-mono);
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        opacity: 0.6;
        font-style: normal;
    }

    /* ============================================
     ACCESSIBILITY - Focus & Motion
     ============================================ */
    .image-frame:focus-within {
        outline: 2px solid var(--color-red);
        outline-offset: 2px;
    }

    @media (prefers-reduced-motion: reduce) {
        .profile-img,
        .tech-item {
            transition: none;
        }
    }

    /* ============================================
     MOBILE ADJUSTMENTS - < 768px
     ============================================ */
    @media (max-width: 767px) {
        .text-block {
            text-align: left;
        }

        .drop-cap {
            font-size: 3rem;
        }

        .quote-box {
            padding: 3rem 1.5rem;
        }
    }
</style>
